<html><head>
  <title>3D Interactive Project - Step 2: Interactive Elements</title>
  <style>
  body {
    font-family: Arial, sans-serif;
    background-color: #f0f0f0;
    margin: 0;
    padding: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }
  .container {
    background-color: white;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    max-width: 800px;
    width: 100%;
  }
  h1 {
    color: #333;
    text-align: center;
  }
  p {
    color: #666;
    line-height: 1.6;
  }
  .canvas-container {
    width: 100%;
    height: 400px;
    margin-top: 20px;
    border: 1px solid #ddd;
    border-radius: 5px;
    overflow: hidden;
  }
  #renderCanvas {
    width: 100%;
    height: 100%;
    touch-action: none;
  }
  .controls {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 20px;
  }
  .control-btn {
    padding: 10px 20px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.3s;
  }
  .control-btn:hover {
    background-color: #45a049;
  }
  .next-step {
    display: block;
    margin: 20px auto 0;
    padding: 10px 20px;
    background-color: #2196F3;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.3s;
    text-decoration: none;
    text-align: center;
  }
  .next-step:hover {
    background-color: #1976D2;
  }
  </style>
  <script src="https://cdn.babylonjs.com/babylon.js"></script>
  <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
  </head>
  <body>
    <div class="container">
      <h1>3D Interactive Project - Step 2: Interactive Elements</h1>
      <p>Great job on completing Step 1! Now, let's add some interactivity to our 3D scene. In this step, we've created multiple objects that you can interact with. Click on the objects to change their colors, and use the buttons below to control the central sphere's animation.</p>
      <div class="canvas-container">
        <canvas id="renderCanvas"></canvas>
      </div>
      <div class="controls">
        <button id="startAnimation" class="control-btn">Start Animation</button>
        <button id="stopAnimation" class="control-btn">Stop Animation</button>
        <button id="resetAnimation" class="control-btn">Reset</button>
      </div>
      <a href="https://websim.ai/projects/3d-interactive/step3" class="next-step">Next Step</a>
    </div>
  
    <script>
      const canvas = document.getElementById("renderCanvas");
      const engine = new BABYLON.Engine(canvas, true);
  
      const createScene = function () {
        const scene = new BABYLON.Scene(engine);
        
        const camera = new BABYLON.ArcRotateCamera("camera", -Math.PI / 2, Math.PI / 2.5, 5, new BABYLON.Vector3(0, 0, 0), scene);
        camera.attachControl(canvas, true);
        
        const light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(0, 1, 0), scene);
        
        const sphere = BABYLON.MeshBuilder.CreateSphere("sphere", {diameter: 1}, scene);
        
        const box = BABYLON.MeshBuilder.CreateBox("box", {size: 0.75}, scene);
        box.position.x = 1.5;
        
        const cylinder = BABYLON.MeshBuilder.CreateCylinder("cylinder", {height: 1, diameter: 0.75}, scene);
        cylinder.position.x = -1.5;
  
        const changeColor = function(mesh) {
          mesh.material = new BABYLON.StandardMaterial("material", scene);
          mesh.material.diffuseColor = new BABYLON.Color3(Math.random(), Math.random(), Math.random());
        };
  
        [sphere, box, cylinder].forEach(mesh => {
          mesh.actionManager = new BABYLON.ActionManager(scene);
          mesh.actionManager.registerAction(
            new BABYLON.ExecuteCodeAction(
              BABYLON.ActionManager.OnPickTrigger,
              function() { changeColor(mesh); }
            )
          );
        });
  
        let animation;
        const createAnimation = function() {
          animation = new BABYLON.Animation("sphereAnimation", "position.y", 30, 
            BABYLON.Animation.ANIMATIONTYPE_FLOAT, 
            BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);
          const keyFrames = [
            { frame: 0, value: 0 },
            { frame: 15, value: 1 },
            { frame: 30, value: 0 }
          ];
          animation.setKeys(keyFrames);
          sphere.animations = [animation];
        };
        createAnimation();
  
        document.getElementById("startAnimation").addEventListener("click", function() {
          scene.beginAnimation(sphere, 0, 30, true);
        });
  
        document.getElementById("stopAnimation").addEventListener("click", function() {
          scene.stopAnimation(sphere);
        });
  
        document.getElementById("resetAnimation").addEventListener("click", function() {
          scene.stopAnimation(sphere);
          sphere.position.y = 0;
        });
  
        return scene;
      };
  
      const scene = createScene();
  
      engine.runRenderLoop(function () {
        scene.render();
      });
  
      window.addEventListener("resize", function () {
        engine.resize();
      });
    </script>
  </body></html>